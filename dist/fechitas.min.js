/*! fechitas - v0.4.0 - 2015-03-05
* https://jaimerodas.github.io/fechitas
* Copyright (c) 2015 Jaime Rodas; Licensed MIT */
Date.prototype.fechitasFormat=function(a){var b,c="enero febrero marzo abril mayo junio julio agosto septiembre octubre noviembre diciembre".split(" "),d="ene feb mar abr may jun jul ago sep oct nov dic".split(" "),e=$.extend({type:"day",format:"normal",capitalized:!1},a),f="invalid format",g="-";switch("verbose"==e.format&&(b=d[this.getMonth()]),"veryverbose"==e.format&&(b=c[this.getMonth()],g=" "),"verbose"!=e.format&&"veryverbose"!=e.format||!e.capitalized||(b=b.capitalize()),e.format){case"normal":f=this.getUTCFullYear()+g+pad(this.getUTCMonth()+1);break;case"inverse":f=pad(this.getUTCMonth()+1)+g+this.getUTCFullYear();break;case"verbose":case"veryverbose":f=b+g+this.getUTCFullYear()}return"day"==e.type&&("normal"==e.format?f+=g+pad(this.getUTCDate()):f=pad(this.getUTCDate())+g+f),f},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var pad=function(a){return 10>a?"0"+a:a},daysInMonth=function(a,b){return/8|3|5|10/.test(b)?30:1!=b?31:a%4===0&&a%100!==0||a%400===0?29:28};!function(a){a.fn.fechitas=function(b){var c=a.extend({type:"day",format:"normal",capitalized:!1,hideOnMobile:!0},b);if(c.hideOnMobile&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return this;var d,e,f,g,h,i,j,k="enero febrero marzo abril mayo junio julio agosto septiembre octubre noviembre diciembre".split(" "),l=("ene feb mar abr may jun jul ago sep oct nov dic".split(" "),function(){var a=g.toString().substr(0,3);j.find(".fechitas-year").find(".fechitas-chooseDecade").val(a).text(g),j.find(".fechitas-month").find(".fechitas-chooseDecade").val(a).text(g),j.find(".fechitas-month").find(".fechitas-chooseYear").val(g).text(k[h].capitalize())}),m=function(a,b){b=void 0===b?!1:b;var c,d,e,f=j.find(".fechitas-decade"),h=f.find(".fechitas-decade-years");for(h.html(""),c=b?a.toString():a.toString().substr(0,3),d=0;10>d;d++)e='<button type="button" class="fechitas-chooseYear',c+d==g.toString()&&(e+=" fechitas-active"),e+='" value="'+c+d+'">'+c+d+"</button>",h.append(e);c=parseInt(c,10),h.prepend('<button type="button" class="fechitas-chooseDecade fechitas-choose" value="'+(c-1)+'">'+(c-1)+'0\'s</button><button type="button" class="fechitas-chooseDecade fechitas-choose" value="'+(c+1)+'">'+(c+1)+"0's</button>")},n=function(a){var b,c,d=j.find(".fechitas-year"),e=d.find(".fechitas-year-months").html(""),f=a.toString().substr(0,3);for(d.find(".fechitas-chooseDecade").text(a).val(f),b=0;12>b;b++)c='<button class="fechitas-chooseMonth',b==h&&(c+=" fechitas-active"),c+='" value="'+b+'" type="button">'+k[b].capitalize()+"</button>",e.append(c)},o=function(a,b){var c,d,e,f,k=daysInMonth(a,b),l=j.find(".fechitas-month"),m=l.find(".fechitas-month-days");if(m.html(""),d=new Date(g,h,1),d=d.getDay(),d>0)for(e=0;d>e;e++)m.append('<div class="empty">');for(c=1;k>=c;c++)f='<button type="button" class="fechitas-chooseDay',c==i&&(f+=" fechitas-active"),f+='" value="'+c+'">'+c+"</button>",m.append(f)},p=function(b){a(b).siblings().removeClass("fechitas-active"),a(b).addClass("fechitas-active")},q=function(a){var b=j.find(a);b.siblings().hide(),b.show()},r=function(){var a=d.data("fecha");a?f=new Date(a):(f="input"==e?d.val():d.html(),f=""===f?new Date:new Date(f),("[object Date]"!==Object.prototype.toString.call(f)||isNaN(f.getTime()))&&(f=new Date)),g=f.getUTCFullYear(),h=f.getUTCMonth(),i=f.getUTCDate(),m(g),n(g),"day"==c.type&&(o(g,h),l())},s=function(){d=a(this),e=d.get(0).nodeName.toLowerCase(),"input"==e&&d.attr("type","text"),j=a(".fechitas-container"),r(this),q("month"==c.type?".fechitas-year":".fechitas-month"),j.addClass("fechitas-visible")},t=function(){j.removeClass("fechitas-visible")},u=function(){f=new Date(g,h,i);var a=f.fechitasFormat(c);"input"==e?d.val(a):d.text(a),d.data("fecha",f.fechitasFormat()),d.trigger("fechitasDateChange",[a,f.fechitasFormat()]),t()},v=function(b){var c,e,f="D L M M J V S".split(" ");d=a(b).data("hasFechitas",!0),c=a(".fechitas-container"),c.length>0?j=c:(e=a('<div class="fechitas-month-week" />'),f.forEach(function(b){var c=a('<div class="fechitas-week-day" />').text(b);e.append(c)}),j=a('<div class="fechitas-container" />').append('<div class="fechitas-box"><div class="fechitas-decade fechitas-panel"><div class="fechitas-decade-years"></div></div><div class="fechitas-year fechitas-panel"><button type="button" class="fechitas-chooseDecade fechitas-choose"></button><div class="fechitas-year-months"></div></div><div class="fechitas-month fechitas-panel"><button type="button" class="fechitas-chooseDecade fechitas-choose"></button><button type="button" class="fechitas-chooseYear fechitas-choose"></button><div class="fechitas-month-days"></div></div></div>'),j.find(".fechitas-month-days").before(e),a("body").append(j))};return v(this),d.on("focus",s),d.on("click",s),j.on("click",t),j.on("click",".fechitas-chooseDecade",function(b){var c=parseInt(a(this).val(),10);m(c,!0),q(".fechitas-decade"),b.stopPropagation()}),j.on("click",".fechitas-chooseYear",function(b){g=parseInt(a(this).val(),10),a(this).parent().hasClass(".fechitas-month")&&p(this),l(),q(".fechitas-year"),b.stopPropagation()}),j.on("click",".fechitas-chooseMonth",function(b){return h=parseInt(a(this).val(),10),p(this),"month"==c.type?(i=1,u(),this):(o(g,h),l(),q(".fechitas-month"),void b.stopPropagation())}),j.on("click",".fechitas-chooseDay",function(){i=parseInt(a(this).val(),10),p(this),u()}),this}}(jQuery);